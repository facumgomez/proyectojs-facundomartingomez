const productos = [
    {
    id: "01",
    titulo: "COMBO MANCUERNAS 25kg",
    imagen: "./img/01.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 75560
    },
    {
    id: "02",
    titulo: "BARRA DOMINADAS PARED",
    imagen:"./img/02.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 50380
    },
    {
    id: "03",
    titulo: "BAND DOMINADAS",
    imagen:"./img/03.jpg",
    categoria: {
        nombre: "Bandas Elasticas",
        id: "bandas"
    },
    precio: 15120
    },
    {
    id: "04",
    titulo: "RODILLERA DEPORTIVA",
    imagen:"./img/04.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 12050
    },
    {
    id: "05",
    titulo: "SOGA PARA SALTAR",
    imagen:"./img/05.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 10490
    },
    {
    id: "06",
    titulo: "MANCUERNA HEXAGONAL 4kg",
    imagen:"./img/06.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 17699
    },
    {
    id: "07",
    titulo: "MANCUERNA HEXAGONAL 30kg",
    imagen:"./img/07.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 120899
    },
    {
    id: "08",
    titulo: "MANCUERNA HEXAGONAL 2kg",
    imagen:"./img/08.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 7999
    },
    {
    id: "09",
    titulo: "MANCUERNA FUNDICION 15kg",
    imagen:"./img/09.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 40000
    },
    {
    id: "10",
    titulo: "MANCUERNA FUNDICION 5Kg",
    imagen:"./img/10.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 13500
    },
    {
    id: "11",
    titulo: "MANCUERNA FUNDICION 20kg",
    imagen:"./img/11.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 52658
    },
    {
    id: "12",
    titulo: "PESA RUSA FUNDICION 10kg",
    imagen:"./img/12.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 26033
    },
    {
    id: "13",
    titulo: "PESA RUSA FUNDICION 21kg",
    imagen:"./img/13.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 53165
    },
    {
    id: "14",
    titulo: "PESA RUSA FUNDICION 14kg",
    imagen:"./img/14.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 36046
    },
    {
    id: "15",
    titulo: "MANCUERNA REDONDA 2,5kg",
    imagen:"./img/15.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 13264
    },
    {
    id: "16",
    titulo: "MANCUERNA REDONDA 5kg",
    imagen:"./img/16.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 25327
    },
    {
    id: "17",
    titulo: "MANCUERNA REDONDA 15kg",
    imagen:"./img/17.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 74989
    },
    {
    id: "18",
    titulo: "MANCUERNA REDONDA 10kg",
    imagen:"./img/18.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 49655
    },
    {
    id: "19",
    titulo: "MANCUERNA CROMADA 15kg",
    imagen:"./img/19.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 70818
    },
    {
    id: "20",
    titulo: "MANCUERNA CROMADA 5kg",
    imagen:"./img/20.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 15713
    },
    {
    id: "21",
    titulo: "MANCUERNA CROMADA 10kg",
    imagen:"./img/21.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 47845
    },
    {
    id: "22",
    titulo: "MANCUERNA PVC 5kg",
    imagen:"./img/22.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 6999
    },
    {
    id: "23",
    titulo: "MANCUERNA PVC 1kg",
    imagen:"./img/23.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 2699
    },
    {
    id: "24",
    titulo: "PESA PVC 12kg",
    imagen:"./img/24.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 19117
    },
    {
    id: "25",
    titulo: "PESA PVC 18kg",
    imagen:"./img/25.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 30205
    },
    {
    id: "26",
    titulo: "PESA PVC 3kg",
    imagen:"./img/26.jpg",
    categoria: {
        nombre: "Mancuernas y Pesas",
        id: "mancuernas"
    },
    precio: 5829
    },
    {
    id: "27",
    titulo: "PARALELAS CALISTENIA",
    imagen:"./img/27.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
        },
        precio: 28940
    },
    {
    id: "28",
    titulo: "MUÃ‘EQUERAS CON GANCHO",
    imagen:"./img/28.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 14999
    },
    {
    id: "29",
    titulo: "BANDA ELASTICA CON AGARRE",
    imagen:"./img/29.jpg",
    categoria: {
        nombre: "Bandas Elasticas",
        id: "bandas"
    },
    precio: 5152
    },
    {
    id: "30",
    titulo: "CINTURON DE LEVANTAMIENTO",
    imagen:"./img/30.jpg",
    categoria: {
        nombre: "Discos y Barras",
        id: "barras"
    },
    precio: 18700
    },
    {
    id: "31",
    titulo: "CINTURON DE PALANCA",
    imagen:"./img/31.jpg",
    categoria: {
        nombre: "Discos y Barras",
        id: "barras"
    },
    precio: 88593    
    },
    {
    id: "32",
    titulo: "PARALELAS CALISTENIA PUSH UP",
    imagen:"./img/32.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 63850
    },
    {
    id: "33",
    titulo: "BANCO ABDOMINALES",
    imagen:"./img/33.jpg",
    categoria: {
        nombre: "Maquinas de Entrenamiento",
        id: "maquinas"
    },
    precio: 670990
    },
    {
    id: "34",
    titulo: "SILLON DE CUADRICEPS",
    imagen:"./img/34.jpg",
    categoria: {
        nombre: "Maquinas de Entrenamiento",
        id: "maquinas"
    },
    precio: 525954
    },
    {
    id: "35",
    titulo: "PUSH UP BARS",
    imagen:"./img/35.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 5970
    },
    {
    id: "36",
    titulo: "RUEDA PARA ABDOMINALES",
    imagen:"./img/36.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 8898
    },
    {
    id: "37",
    titulo: "MOLDEADOR DE PECTORALES",
    imagen:"./img/37.jpg",
    categoria: {
        nombre: "Bandas Elasticas",
        id: "bandas"
    },
    precio: 5355
    },
    {
    id: "38",
    titulo: "DISCO FUNDICION 1,25kg",
    imagen:"./img/38.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 3999
    },
    {
    id: "39",
    titulo: "CINTO PARA BICEPS",
    imagen:"./img/39.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 20100
    },
    {
    id: "40",
    titulo: "GUANTE PARA PESAS",
    imagen:"./img/40.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 5200
    },
    {
    id: "41",
    titulo: "CAJON DE SALTO CROSSFIT",
    imagen:"./img/41.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 29998
    },
    {
    id: "42",
    titulo: "COLCHONETA ALTA RESISTENCIA",
    imagen:"./img/42.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 525954
    },
    {
    id: "43",
    titulo: "BARRA W CROMADA CON ROSCA ",
    imagen:"./img/43.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 41280
    },
    {
    id: "44",
    titulo: "BARRA DE FUERZA RESORTE",
    imagen:"./img/44.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 8700
    },
    {
    id: "45",
    titulo: "BANCO DE PECHO PLANO",
    imagen:"./img/45.jpg",
    categoria: {
        nombre: "Maquinas de Entrenamiento",
        id: "maquinas"
    },
    precio: 59690
    },
    {
    id: "46",
    titulo: "SOGA PESADA",
    imagen:"./img/46.jpg",
    categoria: {
        nombre: "Entrenamiento Funcional",
        id: "funcional"
    },
    precio: 525954
    },
    {
    id: "47",
    titulo: "EXPANSOR DE PECHO",
    imagen:"./img/47.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 20424
    },
    {
    id: "48",
    titulo: "BARRA CURL PESO FIJO 15kg",
    imagen:"./img/48.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 90333
    },
    {
    id: "49",
    titulo: "BARRA CURL PESO FIJO 20kg",
    imagen:"./img/49.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "maquinas"
    },
    precio: 124998
    },
    {
    id: "50",
    titulo: "BARRA CURL PESO FIJO 10kg",
    imagen:"./img/50.jpg",
    categoria: {
        nombre: "Barras y Discos",
        id: "barras"
    },
    precio: 57408
    },
    {
    id: "51",
    titulo: "BANCO DE PECHO REGULABLE",
    imagen:"./img/51.jpg",
    categoria: {
        nombre: "Maquinas de Entrenamiento",
        id: "maquinas"
    },
    precio: 387450
    },
    {
    id: "52",
    titulo: "BARRA ACERO HUECA",
    imagen:"./img/52.jpg",
    categoria: {
        nombre: "Discos y Barras",
        id: "barras"
    },
    precio: 16418
    },
    {
    id: "53",
    titulo: "CAMA ELASTICA",
    imagen:"./img/53.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 190558
    },
    {
    id: "54",
    titulo: "STEP CON DOS MODULOS",
    imagen:"./img/54.jpg",
    categoria: {
        nombre: "Fitness",
        id: "fitness"
    },
    precio: 22649
    }
]

const conteinerProductos = document.querySelector("#conteinerProductos");
const botonCategoria = document.querySelectorAll(".botonCategorias");
const tituloPrincipal = document.querySelector("#tituloPrincipal");
const carritoCantidad = document.querySelector("#carritoCantidad");
let botonAgregar = document.querySelectorAll (".botonAgregar")

function cargaProductos(productoSeleccionados) {
    conteinerProductos.innerHTML = "";
    productoSeleccionados.forEach(producto => {
        const div = document.createElement("div");
        div.classList.add("listProductos");
        div.innerHTML = `
            <img src="${producto.imagen}" alt="${producto.titulo}">
            <div class="detalleProducto">
                <h2>${producto.titulo}</h2>
                <p>$${producto.precio}</p>
                <button class=botonAgregar id="${producto.id}">Agregar al Carrito</button>
            </div>
        `;
        conteinerProductos.append(div);
    })
    actualizarAgregar();

}
cargaProductos(productos);

botonCategoria.forEach(boton =>{
    boton.addEventListener("click", (e) =>{
        botonCategoria.forEach(boton => boton.classList.remove("active"));
        e.currentTarget.classList.add("active");

        if(e.currentTarget.id != "todosProductos"){
            const productoCategoria = productos.find (producto => producto.categoria.id === e.currentTarget.id);
            tituloPrincipal.innerText = productoCategoria.categoria.nombre;
            const productosFilter = productos.filter (producto => producto.categoria && producto.categoria.id === e.currentTarget.id);
            cargaProductos(productosFilter);
        }else {
            cargaProductos(productos);
            tituloPrincipal.innerText = "Todos los Productos";
        }
    })
})

function actualizarAgregar (){
    botonAgregar = document.querySelectorAll(".botonAgregar");
    botonAgregar.forEach(boton =>{
        boton.addEventListener("click", agregarCarrito);
    })
}

let productosCarrito;
let productosCarritoLocal = localStorage.getItem("productosAlCarrito");

if (productosCarritoLocal){
    productosCarrito = JSON.parse(productosCarritoLocal);
    actualizarCantidad();
}else{
    productosCarrito =  [];
}
function agregarCarrito (e){
    const idAgregar = e.currentTarget.id;
    const productosAgregados = productos.find(producto => producto.id === idAgregar);

    if(productosCarrito.some(producto => producto.id === idAgregar)){
        let index = productosCarrito.findIndex(producto => producto.id === idAgregar);
        productosCarrito[index].cantidad++;
    } else{
        productosAgregados.cantidad = 1;
        productosCarrito.push (productosAgregados)
    }
    actualizarCantidad ();
    localStorage.setItem("productosAlCarrito", JSON.stringify(productosCarrito));
}
function actualizarCantidad(){
    let cantidadActualizar = productosCarrito.reduce((acc, producto)=> acc + producto.cantidad, 0)
    carritoCantidad.innerText = cantidadActualizar;
}